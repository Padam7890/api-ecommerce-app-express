generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Image {
  id             Int       @id @default(autoincrement())
  url            String
  type           ImageType
  type_id        Int
}

enum ImageType {
  Category
  Product
  Subcategory
}

model User {
  id         Int          @id @default(autoincrement())
  email      String       @unique
  name       String?
  password   String
  favourites Favourites[]
}

model Favourites {
  id          Int      @id @default(autoincrement())
  user_id     Int
  product_id  Int
  category_id Int
  user        User     @relation(fields: [user_id], references: [id])
  product     Product  @relation(fields: [product_id], references: [id])
  category    Category @relation(fields: [category_id], references: [id])
}

model Product {
  id                  Int          @id @default(autoincrement())
  product_title       String
  product_description String      @db.Text
  regular_price       Decimal
  sale_price          Decimal
  // product_image       String
  category_id         Int
  subcategory_id      Int?
  favourites          Favourites[]
  category            Category   @relation(fields: [category_id], references: [id])
  subcategory         Subcategory? @relation(fields: [subcategory_id], references: [id])
}

model Category {
  id             Int         @id @default(autoincrement())
  category_name  String
  products       Product[]
  favourites     Favourites[]
  subcategories  Subcategory[]
}

model Subcategory {
  id               Int         @id @default(autoincrement())
  subcategory_name String
  category_id      Int
  products         Product[]
  category         Category    @relation(fields: [category_id], references: [id])
}
